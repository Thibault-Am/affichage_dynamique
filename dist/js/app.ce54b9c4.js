(function(e){function t(t){for(var r,o,c=t[0],a=t[1],u=t[2],d=0,l=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);h&&h(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i={app:0},s=[];function c(e){return a.p+"js/"+({about:"about"}[e]||e)+"."+{about:"cb0a1847"}[e]+".js"}function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"bc95055e"}[e]+".css",i=a.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===i))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],d=u.getAttribute("data-href");if(d===r||d===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[e],h.parentNode.removeChild(h),n(s)},h.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=s);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,a.nc&&d.setAttribute("nonce",a.nc),d.src=c(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}i[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0369":function(e,t,n){},"0c17":function(e,t,n){"use strict";n("0369")},"47fe":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,i,s){const c=Object(r["t"])("router-view");return Object(r["n"])(),Object(r["c"])(c)}var i={data(){return{isFullscreen:!1}},watch:{$route(){this.verificationToken()}},mounted(){this.verificationToken()},methods:{verificationToken(){"TokenSelect"!=this.$route.name&&(this.$store.state.token||this.$router.push("/TokenSelect"))}}},s=(n("0c17"),n("6b0d")),c=n.n(s);const a=c()(i,[["render",o]]);var u=a,d=n("6c02");const l={class:"screens"},h=["innerHTML"];function p(e,t,n,o,i,s){return Object(r["n"])(),Object(r["d"])("div",l,[Object(r["e"])("div",{innerHTML:i.compiled},null,8,h)])}var f=n("7c5c"),m={data(){return{content:[],current:[""],compiled:null,Next:0,Boucle:!1,img_src:""}},methods:{logout(){this.$router.push("/TokenSelect")},login(){this.axios.patch("http://149.91.80.75:8055/items/Dispositif/"+this.$store.state.token,{status:"connecte"})},loadApi(){fetch("http://149.91.80.75:8055/items/Sequence?filter[Dispositif][_eq]="+this.$store.state.token).then(e=>e.json()).then(e=>{e.data.map((e,t)=>{this.Boucle=e.Boucle,fetch(`http://149.91.80.75:8055/items/Sequence_Ecrans?filter[Sequence_id][_eq]=${e.id}&fields=Ecrans_id.FontColor,Ecrans_id.BackgroundColor,Ecrans_id.Markdown,Ecrans_id.Image,Ecrans_id.Video,Ordre,Duree`).then(e=>e.json()).then(e=>{this.content=e.data,this.firstSlide()})})})},nextSlide(){for(var e=0;e<this.content.length;e++)if(this.content[e].Ordre===this.Next){this.current=this.content[e],this.Next=this.Next+1,this.compiled=`<div class="main" style='width:100vw;height:100vh;background-color:${this.current.Ecrans_id.BackgroundColor};color:${this.current.Ecrans_id.FontColor}'>`,null!=this.current.Ecrans_id.Image?this.compiled+=`<img id='imgFull' src='http://149.91.80.75:8055/assets/${this.current.Ecrans_id.Image}' />`:null!=this.current.Ecrans_id.Markdown?(this.compiled+="<section class='texte'>",this.compiled+=f["marked"].parse(this.current.Ecrans_id.Markdown),this.compiled+="</section>"):null!=this.current.Ecrans_id.Video&&(this.compiled+=`\n                                  <video controls width="500" autoplay='true'>\n\n                                    <source src='http://149.91.80.75:8055/assets/${this.current.Ecrans_id.Video}>\n\n                                    Sorry, your browser doesn't support embedded videos.\n                                </video>`),this.compiled+="</div>",this.Next>this.content.length?1==this.Boucle?setTimeout(()=>{this.firstSlide()},1e3*this.current.Duree):setTimeout(()=>{this.end()},1e3*this.current.Duree):setTimeout(()=>{this.nextSlide()},1e3*this.current.Duree);break}},end(){this.compiled="<div class='fin'>Fin De Sequence</div>"},firstSlide(){this.content.map((e,t)=>{1===e.Ordre&&(this.current=e,this.Next=2,this.compiled=`<div class="main" style='width:100vw;height:100vh;background-color:${this.current.Ecrans_id.BackgroundColor};color:${this.current.Ecrans_id.FontColor}'>`,null!=this.current.Ecrans_id.Image?this.compiled+=`<div id='imgFull' style='background-position: center;width: 100vw; height: 100vh;background-size: cover;background-image: url(http://149.91.80.75:8055/assets/${this.current.Ecrans_id.Image})' /></div>`:null!=this.current.Ecrans_id.Markdown?(this.compiled+="<section class='texte'>",this.compiled+=f["marked"].parse(this.current.Ecrans_id.Markdown),this.compiled+="</section>"):null!=this.current.Ecrans_id.Video&&(this.compiled+=`\n                                  <video controls width="500" autoplay='true'>\n\n                                    <source src='http://149.91.80.75:8055/assets/${this.current.Ecrans_id.Video}>\n\n                                    Sorry, your browser doesn't support embedded videos.\n                                </video>`),this.compiled+="</div>",setTimeout(()=>{this.nextSlide()},1e3*this.current.Duree))})}},created(){this.loadApi(),this.login()}};n("8b0c");const v=c()(m,[["render",p]]);var g=v;const b=[{path:"/",name:"Screens",component:g},{path:"/TokenSelect",name:"TokenSelect",component:function(){return n.e("about").then(n.bind(null,"1ef2"))}}],k=Object(d["a"])({history:Object(d["b"])("/"),routes:b});var y=k,w=n("5502"),_=n("bfa9");new _["a"]({storage:window.localStorage});var E=Object(w["a"])({plugins:[(new _["a"]).plugin],state:{token:!1},mutations:{setToken(e,t){e.token=t}},actions:{},modules:{}}),S=n("bc3a"),O=n.n(S),j=n("130e");Object(r["b"])(u).use(E).use(y).use(j["a"],O.a).mount("#app")},"8b0c":function(e,t,n){"use strict";n("47fe")}});
//# sourceMappingURL=app.ce54b9c4.js.map